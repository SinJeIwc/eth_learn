# User ID Authentication

## üéØ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ User ID**

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Xsolla –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å –≤ –∏–≥—Ä—É, –∏—Å–ø–æ–ª—å–∑—É—è –∏—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã–π User ID.

## üîß **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **1. User ID Authentication Flow**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–π User ID –∏–∑ –∏–≥—Ä—ã
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç User ID —á–µ—Ä–µ–∑ webhook
3. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç –≤ –∏–≥—Ä—É
4. User ID —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º Xsolla

### **2. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ User ID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–Ω–∞–∫–æ–º—ã–π ID –∏–∑ –∏–≥—Ä—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: User ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

## üìã **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Xsolla Publisher Account:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ Login –ø—Ä–æ–µ–∫—Ç–∞**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Publisher Account](https://publisher.xsolla.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Login –ø—Ä–æ–µ–∫—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ "Login with linked user ID"

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook**
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Login –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ URL –¥–ª—è webhook
2. URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`
3. Webhook –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ User ID

### **3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Webhook –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
```javascript
// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook
app.post('/api/validate-user', (req, res) => {
  const { user_id } = req.body;
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º User ID –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
  const user = findUserById(user_id);
  
  if (user) {
    res.status(200).json({
      user_id: user.id,
      username: user.username,
      email: user.email
    });
  } else {
    res.status(404).json({ error: 'User not found' });
  }
});
```

## üéÆ **–í –∏–≥—Ä–µ:**

### **User Experience:**
1. **–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –≤—Ö–æ–¥–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "–í—Ö–æ–¥ –ø–æ User ID"
2. **–í–≤–æ–¥ User ID**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–π ID –∏–∑ –∏–≥—Ä—ã
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç User ID —á–µ—Ä–µ–∑ webhook
4. **–í—Ö–æ–¥ –≤ –∏–≥—Ä—É**: –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç

### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–≥—Ä–µ:**
- **–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, username!"
- **User ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, username! (–í—Ö–æ–¥ –ø–æ User ID)"

## üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

### **1. JWT Validation**
- Webhook –ø–æ–ª—É—á–∞–µ—Ç JWT —Å –ø–æ–¥–ø–∏—Å—å—é Xsolla
- JWT —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ JWT: 7 –º–∏–Ω—É—Ç

### **2. User ID Requirements**
- User ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
- –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UUID –∏–ª–∏ —á–∏—Å–ª–æ–≤–æ–π ID

### **3. Webhook Security**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è webhook URL
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ JWT –ø–æ–¥–ø–∏—Å—å
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ

## üìä **JWT Claims:**

| Claim | Type | Description |
|-------|------|-------------|
| exp | Unix Timestamp | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è JWT (7 –º–∏–Ω—É—Ç) |
| iat | Unix Timestamp | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è JWT |
| iss | string | –°–µ—Ä–≤–∏—Å: https://login.xsolla.com |
| request_type | string | –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞: gateway_request |
| xsolla_login_project_id | string | ID Login –ø—Ä–æ–µ–∫—Ç–∞ |
| social_access_token | string | –¢–æ–∫–µ–Ω —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

## üöÄ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π:**

### **1. –ü–æ–ª—É—á–µ–Ω–∏–µ User ID**
```javascript
// –í –∏–≥—Ä–µ –ø–æ–ª—É—á–∞–µ–º User ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userId = getCurrentUserID();
```

### **2. –ü–µ—Ä–µ–¥–∞—á–∞ –≤ Web Shop**
```javascript
// –ü–µ—Ä–µ–¥–∞–µ–º User ID –≤ Web Shop
const webShopUrl = `https://yourshop.com?user_id=${userId}`;
```

### **3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Web Shop**
```javascript
// –í Web Shop –ø–æ–ª—É—á–∞–µ–º User ID –∏–∑ URL
const urlParams = new URLSearchParams(window.location.search);
const userId = urlParams.get('user_id');
```

## üìã **–ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

- [ ] –°–æ–∑–¥–∞–Ω Login –ø—Ä–æ–µ–∫—Ç –≤ Publisher Account
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω "Login with linked user ID"
- [ ] –î–æ–±–∞–≤–ª–µ–Ω webhook URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ User ID
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω webhook –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT –ø–æ–¥–ø–∏—Å–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ User ID**: UUID –∏–ª–∏ —á–∏—Å–ª–æ–≤—ã–µ ID
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è webhook
3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–µ User ID
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã**: –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ webhook**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sandbox —Ä–µ–∂–∏–º

## üîó **–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**

- [Xsolla Publisher Account](https://publisher.xsolla.com/)
- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://developers.xsolla.com/solutions/web-shop/create-web-shop/set-up-authentication/)
- [JWT Documentation](https://jwt.io/)

User ID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
