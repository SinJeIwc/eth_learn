# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redirect URI –≤ Xsolla Publisher Account

## ‚ö†Ô∏è –í–ê–ñ–ù–û! –ë–µ–∑ —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≤–∞—à—É callback —Å—Ç—Ä–∞–Ω–∏—Ü—É. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Redirect URI –≤ Publisher Account.

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Publisher Account
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ:
```
https://publisher.xsolla.com/846471/projects/295131/login/dc03f347-86a4-4ee6-8cd4-5fda3b5d8574/settings/oauth2
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [publisher.xsolla.com](https://publisher.xsolla.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç "I was reincarnated in another world..."
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Players ‚Üí Login**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Security ‚Üí OAuth 2.0**

### 2. –ù–∞–π–¥–∏—Ç–µ OAuth 2.0 Client —Å ID: 14057

### 3. –î–æ–±–∞–≤—å—Ç–µ Redirect URI

–í –ø–æ–ª–µ **Redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ:

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (localhost):**
```
http://localhost:3000/xsolla-callback.html
```

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):**
```
https://yourdomain.com/xsolla-callback.html
```

### 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ù–∞–∂–º–∏—Ç–µ **Save** –∏–ª–∏ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Redirect URI:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `http://localhost:3000`
2. –ù–∞–∂–º–∏—Ç–µ **"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Xsolla OAuth 2.0"**
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è popup –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞
4. –í–≤–µ–¥–∏—Ç–µ email –∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ popup –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä–æ–µ—Ç—Å—è
6. –í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

## üîç Troubleshooting

### –û—à–∏–±–∫–∞ "Redirect URI mismatch"
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–≤–∫–ª—é—á–∞—è http/https)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö —Å–ª–µ—à–µ–π –≤ –∫–æ–Ω—Ü–µ
- Callback URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `http://localhost:3000/xsolla-callback.html`

### Popup –æ–∫–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools –≤ popup –æ–∫–Ω–µ (F12)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL —Å–æ–¥–µ—Ä–∂–∏—Ç `?token=...`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `window.opener` –¥–æ—Å—Ç—É–ø–µ–Ω

### –¢–æ–∫–µ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools –≤ –≥–ª–∞–≤–Ω–æ–º –æ–∫–Ω–µ
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "Message from popup: ..."
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ origin —Ä–∞–∑—Ä–µ—à–µ–Ω –≤ `handleMessage`

### Fallback –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ localStorage: Application ‚Üí Local Storage ‚Üí `xsolla_temp_token`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Redirect URIs

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```
http://localhost:3000/xsolla-callback.html
http://localhost:3001/xsolla-callback.html
http://127.0.0.1:3000/xsolla-callback.html
```

## üöÄ Production Setup

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω:

1. **–î–æ–±–∞–≤—å—Ç–µ production URL:**
   ```
   https://yourdomain.com/xsolla-callback.html
   ```

2. **–û–±–Ω–æ–≤–∏—Ç–µ .env.production:**
   ```bash
   NEXT_PUBLIC_XSOLLA_PROJECT_ID=295131
   NEXT_PUBLIC_XSOLLA_LOGIN_ID=dc03f347-86a4-4ee6-8cd4-5fda3b5d8574
   NEXT_PUBLIC_XSOLLA_CLIENT_ID=14057
   ```

3. **–ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ CLIENT_SECRET –≤ frontend!**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ backend –¥–ª—è –æ–±–º–µ–Ω–∞ code –Ω–∞ token

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
- [Xsolla Support](https://xsolla.com/support)
- [Developer Documentation](https://developers.xsolla.com/)
- [Community Forum](https://community.xsolla.com/)
